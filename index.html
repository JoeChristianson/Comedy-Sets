<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    
</body>
</html>

<!DOCTYPE html>
<html lang="en">
<meta charset="UTF-8">
<title>Page Title</title>
<meta name="viewport" content="width=device-width,initial-scale=1">
<link rel="stylesheet" href="style.css">
<script src="script.js"></script>
<style>
#main {
    text-align: center;
}


#joke {

    font-size: xx-large;
    min-width: 100px;
    padding: 70px;
}

button {
margin-bottom: 5px;
}

.button-container {
    width:50%;
    margin: auto;
}
.button-container > button {
    color: black;
    width: 30%;
    height: 150px;
    font-size: xx-large;

}
</style>
<script src=""></script>
<body>

<div id="main">

<h1 id="streak">0</h1>

<div id="joke">




</div>

<div class="button-container">
    <button id="button0" onclick="guess(0)">a</button>
    <button id="button1" onclick="guess(1)">b</button>
    <button id="button2" onclick="guess(2)">c</button>
    <button id="button3" onclick="guess(3)">d</button>
    <button id="button4" onclick="guess(4)">e</button>
    <button id="button5" onclick="guess(5)">f</button>
    <button id="button6" onclick="guess(6)">g</button>
    <button id="button7" onclick="guess(7)">h</button>
    <button id="button8" onclick="guess(8)">i</button>
</div>

<button onclick="previousJoke()">Back</button>
<button onclick="nextJoke()">Next</button>

<form onsubmit="setList(); return false">
    <label for="set-list">Enter space separated set list.</label><br>
<input id="set-list" name="set-list" value="">
<input id="submit" type="submit">

</form>
</div>
<script>
var setString = "";
var setArray = [];
var jokeNumber = 0;
var guessArray = [];
var allLetters = ["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"];
var nextLetter = "A";
var correctStreak = 0;
var colorArray = ["blue","red","orange","pink","yellow","cyan","green","purple","magenta"]

function guess(x){
    var guessed = guessArray[x];
    if (guessed == nextLetter){
        correctStreak++;
        document.getElementById("streak").innerHTML = correctStreak;
        nextJoke();
    }
    else{

        correctStreak = 0;
        alert("The next joke was " + setArray[jokeNumber +1]);
        document.getElementById("streak").innerHTML = correctStreak; 
            for (let index = 0; index < 4; index++) {
                previousJoke();
                
            }
            
    }

}




function nextJoke(){
    if (jokeNumber<(setArray.length-1)){
    jokeNumber++;
}
    else {
        jokeNumber = 0;
    }
    if (setArray[jokeNumber] === ""){
        document.getElementById("joke").innerHTML = "End of Set";    
    }
    else {
    document.getElementById("joke").innerHTML = setArray[jokeNumber];
    assignButtons();
    }
}

function previousJoke(){
    if (jokeNumber != 0){
    jokeNumber--;}
    document.getElementById("joke").innerHTML = setArray[jokeNumber];
    assignButtons();

}

function setList(){
    setString = document.getElementById("set-list").value;
    setArray = setString.split(",");
    document.getElementById("joke").textContent = setArray[0];
    document.getElementById("set-list").value = "";
    assignButtons();
}

function assignButtons(){
    if (jokeNumber + 1 < setArray.length){
    nextLetter = setArray[jokeNumber+1][0];
    }
    else {
        nextLetter = setArray[0][0];
    }
    guessArray = randomizeArray();
for(i=0; i < 9;i++){
document.getElementById("button"+i).innerHTML = guessArray[i];
}
// assignButtonColors();
}

function randomizeArray() {
    randomArray = [];
    allLettersRandomizer = allLetters;
    moveItem(nextLetter,allLettersRandomizer,randomArray);
    allLettersRandomizer = removeItem(allLettersRandomizer,nextLetter);
    nextPick = Math.floor(Math.random() * allLettersRandomizer.length);

    for (i = 0;i<8;i++){
        nextPickNumber = Math.floor(Math.random() * allLettersRandomizer.length);
        nextPick = allLettersRandomizer[nextPickNumber];
        allLettersRandomizer = removeItem(allLettersRandomizer,nextPick);
        moveItem(nextPick,allLettersRandomizer,randomArray);

    }
    return shuffle(randomArray);


}

function moveItem(item,fromArray,toArray){
    toArray.push(item);
}

function removeItem(arr, item){
    return arr.filter(f => f !== item);
   }


//    This shuffles the buttons
function shuffle(array) {
    let currentIndex = array.length,  randomIndex;
  
    // While there remain elements to shuffle...
    while (currentIndex != 0) {
  
      // Pick a remaining element...
      randomIndex = Math.floor(Math.random() * currentIndex);
      currentIndex--;
  
      // And swap it with the current element.
      [array[currentIndex], array[randomIndex]] = [
        array[randomIndex], array[currentIndex]];
    }
  
    return array;
  }

function assignButtonColors(){

    for(i=0; i < 9;i++){
        document.getElementById("button"+i).style.backgroundColor = colorArray[i];
    }

}


</script>
</body>

</html>